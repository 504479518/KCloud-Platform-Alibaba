UPDATE `kcloud_platform_alibaba_nacos`.`config_info` SET `data_id` = 'application-common.yaml', `group_id` = 'LAOKOU_GROUP', `content` = '# spring\nspring:\n  # task\n  task:\n    execution:\n      pool:\n        core-size: 9\n        keep-alive: 60s\n      thread-name-prefix: laokou-task-\n  cloud:\n    # 解决集成sentinel，openfeign启动报错，官方下个版本修复\n    openfeign:\n      compression:\n        response:\n          enabled: true\n        request:\n          enabled: true\n      # FeignAutoConfiguration、OkHttpFeignLoadBalancerConfiguration、OkHttpClient#getClient、FeignClientProperties、OptionsFactoryBean#getObject\n      # 在BeanFactory调用getBean()时，不是调用getBean，是调用getObject(),因此，getObject()相当于代理了getBean(),而且getObject()对Options初始化，是直接从openfeign.default获取配置值的\n      okhttp:\n        enabled: true\n      circuitbreaker:\n        enabled: true\n      httpclient:\n        enabled: false\n        disable-ssl-validation: true\n      client:\n        config:\n          default:\n            connectTimeout: 120000 #连接超时\n            readTimeout: 120000 #读取超时\n            logger-level: full\n      lazy-attributes-resolution: true\n    # sentinel\n    sentinel:\n      eager: true #开启饥饿加载，直接初始化\n      transport:\n        port: 8769\n        dashboard: 127.0.0.1:8081\n\n# actuator\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: \"*\"\n  endpoint:\n    health:\n      show-details: always\n\n# springdoc\nspringdoc:\n  swagger-ui:\n    path: /swagger-ui.html\n\n# server\nserver:\n  servlet:\n    encoding:\n      charset: UTF-8\n  undertow:\n    threads:\n      # 设置IO线程数，来执行非阻塞任务，负责多个连接数\n      io: 16\n      # 工作线程数\n      worker: 256\n    # 每块buffer的空间大小\n    buffer-size: 1024\n    # 分配堆外内存\n    direct-buffers: true\n\n# feign\nfeign:\n  sentinel:\n    enabled: true\n    default-rule: default\n    rules:\n      # https://sentinelguard.io/zh-cn/docs/circuit-breaking.html\n      default:\n        - grade: 2 # 异常数策略\n          count: 1 # 异常数模式下为对应的阈值\n          timeWindow: 30 # 熔断时长，单位为 s（经过熔断时长后熔断器会进入探测恢复状态（HALF-OPEN 状态），若接下来的一个请求成功完成（没有错误）则结束熔断，否则会再次被熔断。ERROR_COUNT）\n          statIntervalMs: 1000 # 统计时长（单位为 ms），如 60*1000 代表分钟级（1.8.0 引入）\n          minRequestAmount: 5 # 熔断触发的最小请求数，请求数小于该值时即使异常比率超出阈值也不会熔断', `md5` = '9b6db959c0f547965d6ceb29ccd0a482', `gmt_create` = '2023-01-13 12:16:46', `gmt_modified` = '2023-08-23 14:58:10', `src_user` = 'nacos', `src_ip` = '0:0:0:0:0:0:0:1', `app_name` = '', `tenant_id` = 'a61abd4c-ef96-42a5-99a1-616adee531f3', `c_desc` = '', `c_use` = '', `effect` = '', `type` = 'yaml', `c_schema` = '', `encrypted_data_key` = '' WHERE `id` = 17;
UPDATE `kcloud_platform_alibaba_nacos`.`config_info` SET `data_id` = 'application-gateway.yaml', `group_id` = 'LAOKOU_GROUP', `content` = 'spring:\n  cloud:\n    gateway:\n      ignore:\n        uris:\n          - /actuator/**\n          - /ws/**\n          - /favicon.ico\n          - /swagger-ui/**\n          - /swagger-ui.html\n          - /**/v3/api-docs/**\n          - /oauth2/captcha\n          - /oauth2/authorize\n          - /oauth2/tenant\n          - /oauth2/secret_info\n          - /oauth2/idempotent_token\n          - /v1/secrets\n# springdoc\nspringdoc:\n  swagger-ui:\n    urls:\n      - name: admin\n        url: /v3/api-docs/admin\n      - name: auth\n        url: /v3/api-docs/auth', `md5` = '562222c124eee3c07a2da2d55e866988', `gmt_create` = '2023-01-22 13:16:13', `gmt_modified` = '2023-08-23 14:55:38', `src_user` = 'nacos', `src_ip` = '0:0:0:0:0:0:0:1', `app_name` = 'laokou-gateway', `tenant_id` = 'a61abd4c-ef96-42a5-99a1-616adee531f3', `c_desc` = 'gateway配置', `c_use` = '', `effect` = '', `type` = 'yaml', `c_schema` = '', `encrypted_data_key` = '' WHERE `id` = 1273;