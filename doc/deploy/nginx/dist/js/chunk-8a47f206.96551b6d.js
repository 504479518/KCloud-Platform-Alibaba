(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a47f206"],{"5bd3":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("b775");function n(){return Object(o["b"])({url:"/admin/v1/tokens",method:"get"})}},"765c":function(e,t,r){"use strict";r.d(t,"k",(function(){return n})),r.d(t,"h",(function(){return a})),r.d(t,"i",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"l",(function(){return m})),r.d(t,"o",(function(){return c})),r.d(t,"c",(function(){return d})),r.d(t,"q",(function(){return l})),r.d(t,"e",(function(){return f})),r.d(t,"m",(function(){return b})),r.d(t,"f",(function(){return p})),r.d(t,"d",(function(){return h}));var o=r("b775");function n(e){return Object(o["b"])({url:"/admin/v1/resource/list",method:"post",data:e})}function a(e){return Object(o["b"])({url:"/admin/v1/resource/"+e,method:"get"})}function i(e){return Object(o["b"])({url:"/admin/v1/resource/"+e+"/detail-task",method:"get"})}function s(e,t){return Object(o["b"])({url:"/admin/v1/resource/audit-task",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8","request-id":t}})}function u(e){return Object(o["b"])({url:"/admin/sys/resource/image/api/insert",method:"post",data:e})}function m(e){return Object(o["b"])({url:"/admin/v1/resource/task-list",method:"post",data:e})}function c(e){return Object(o["b"])({url:"/admin/v1/resource",method:"put",data:e})}function d(e){return Object(o["b"])({url:"/admin/sys/resource/image/api/delete?id="+e,method:"delete"})}function l(e){return Object(o["b"])({url:"/admin/v1/resource/upload",method:"post",data:e})}function f(e){return Object(o["b"])({url:"/admin/sys/resource/image/api/auditLog?businessId="+e,method:"get"})}function b(){return Object(o["b"])({url:"/admin/sys/resource/image/api/syncIndex",method:"post"})}function p(e){return Object(o["b"])({url:"/admin/sys/resource/image/api/diagram?processInstanceId="+e,method:"get"})}function h(e){return Object(o["b"])({url:"/admin/sys/resource/image/api/download?id="+e,method:"get",responseType:"blob"})}},e717:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-drawer",{attrs:{width:"35%","label-col":4,"wrapper-col":14,visible:e.open},on:{close:e.onClose}},[r("a-divider",{attrs:{orientation:"left"}},[r("b",[e._v(e._s(e.formTitle))])]),r("a-form-model",{ref:"form2"},[r("a-form-model-item",{attrs:{label:"编号",prop:"id"}},[e._v(" "+e._s(e.form2.id)+" ")]),r("a-form-model-item",{attrs:{label:"类型",prop:"code"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:"image"===e.form2.code,expression:"form2.code === 'image'"}]},[e._v("图片")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"video"===e.form2.code,expression:"form2.code === 'video'"}]},[e._v("视频")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"audio"===e.form2.code,expression:"form2.code === 'audio'"}]},[e._v("音频")])]),r("a-form-model-item",{attrs:{label:"标题",prop:"title"}},[e._v(" "+e._s(e.form2.title)+" ")]),r("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[r("a-input",{attrs:{disabled:"disabled",type:"textarea","allow-clear":""},model:{value:e.form2.remark,callback:function(t){e.$set(e.form2,"remark",t)},expression:"form2.remark"}})],1),r("a-form-model-item",{attrs:{label:"资源",prop:"url"}},[r("audio",{directives:[{name:"show",rawName:"v-show",value:"audio"===e.form2.code,expression:"form2.code === 'audio'"}],attrs:{loop:"loop",src:e.form2.url,controls:"controls"}},[r("object",{attrs:{data:e.form2.url}},[r("embed",{attrs:{src:e.form2.url}})])]),r("img",{directives:[{name:"show",rawName:"v-show",value:"image"===e.form2.code,expression:"form2.code === 'image'"}],attrs:{src:e.form2.url,width:"100",height:"100",alt:"暂无图片"}}),r("video",{directives:[{name:"show",rawName:"v-show",value:"video"===e.form2.code,expression:"form2.code === 'video'"}],attrs:{src:e.form2.url,loop:"loop",width:"250",height:"100",controls:"controls"}},[r("source",{attrs:{src:e.form2.url,type:"video/mp4"}}),r("object",{attrs:{data:e.form2.url,width:"200",height:"100"}},[r("embed",{attrs:{src:e.form2.url,width:"200",height:"100"}})])])])],1),r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("a-form-model-item",{attrs:{label:"审批意见",prop:"comment"}},[r("a-input",{attrs:{placeholder:"请输入审批意见",type:"textarea","allow-clear":""},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),r("div",{staticClass:"bottom-control"},[r("a-space",[r("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("1")}}},[e._v(" 同意 ")]),r("a-button",{attrs:{type:"danger",loading:e.submitLoading},on:{click:function(t){return e.submitForm("0")}}},[e._v(" 驳回 ")])],1)],1)],1)],1)},n=[],a=(r("d3b7"),r("ddb0"),r("765c")),i=r("5bd3"),s={name:"TaskForm",props:{},components:{},data:function(){return{accessToken:"",submitLoading:!1,formTitle:"",form2:{id:"",code:"",title:"",url:"",remark:""},form:{comment:"",taskId:"",taskName:"",instanceId:"",businessKey:"",instanceName:"",values:{auditStatus:""}},open:!1,rules:{comment:[{required:!0,message:"审批意见不为空",trigger:"blur"}]}}},filters:{},created:function(){},computed:{},watch:{},methods:{token:function(){var e=this;Object(i["a"])().then((function(t){e.accessToken=t.data.token}))},onClose:function(){this.open=!1},cancel:function(){this.open=!1,this.reset()},getDetail:function(e){var t=this;Object(a["i"])(e).then((function(r){t.form2.title=r.data.title,t.form2.code=r.data.code,t.form2.id=r.data.id,t.form2.remark=r.data.remark,t.form2.url=r.data.url,t.form2.id=e}))},reset:function(){this.form2={id:"",code:"",title:"",url:"",remark:""},this.form={comment:"",taskId:"",taskName:"",instanceId:"",businessKey:"",instanceName:"",values:{auditStatus:""}}},handleAudit:function(e){this.form.taskId=e.taskId,this.form.instanceId=e.instanceId,this.form.taskName=e.taskName,this.form.businessKey=e.businessKey,this.form.instanceName=e.instanceName,this.getDetail(this.form.businessKey),this.token(),this.open=!0,this.formTitle="审批"},submitForm:function(e){var t=this;this.$refs.form.validate((function(r){if(!r)return!1;t.submitLoading=!0,t.form.values.auditStatus=e,Object(a["b"])(t.form,t.accessToken).then((function(){t.$message.success("审批成功",3),t.open=!1,t.$emit("ok"),t.reset()})).catch((function(){t.token()})).finally((function(){t.submitLoading=!1}))}))}}},u=s,m=r("2877"),c=Object(m["a"])(u,o,n,!1,null,null,null);t["default"]=c.exports}}]);